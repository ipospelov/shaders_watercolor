var buffer,myCanvas,windowEdgeSize,noiseMap,styler,palette,loadingBuffer,bufferSize=2e3,xMargin=150,yMargin=150,xi=0,yi=0,nIters=6,nCurr=0,steps=[[20,30],[15,25],[20,30],[25,35],[20,30],[13,27]],isCaptured=!1;function setup(){frameRate(60),windowEdgeSize=Math.min(windowWidth,windowHeight),myCanvas=createCanvas(windowEdgeSize,windowEdgeSize),(buffer=createGraphics(bufferSize,bufferSize)).pixelDensity(1),myCanvas.style("display","block"),buffer.width=windowEdgeSize,buffer.height=windowEdgeSize,noiseMap=new Noise(5e-5),palette=palettes[paletteIndex],styler=new styles[styleIndex],noiseSeed(fxRandRanged(1,200)),(loadingBuffer=createGraphics(160,30)).background(0),loadingBuffer.textSize(24),loadingBuffer.stroke(255),loadingBuffer.noFill(),buffer.background(0),console.log("Made with ü§ç by @ivposure")}function windowResized(){windowEdgeSize=Math.min(windowWidth,windowHeight),resizeCanvas(windowEdgeSize,windowEdgeSize),buffer.width=windowEdgeSize,buffer.height=windowEdgeSize,image(buffer,0,0)}function drawIsoline(e,r){var n,a,f=noiseMap.get(e,r);styler.setDefault(e,r);var t=styler.getStyle(f);if(buffer.noFill(),bigStroke){var d=randomFromRange([1,2.5,4.5]);buffer.strokeWeight(d)}else buffer.strokeWeight(2.5);buffer.beginShape(POINTS);var o=randomFromRange([7,8,9]);for(i=0;i<30&&!styler.isLeftArea(e,r);i++){t=styler.getStyle(f),buffer.stroke(...t);var s=noise(.001*e,.001*r)*fxRandRanged(-7,7),u=noise(noise(.001*e),noise(.001*r))*fxRandRanged(-7,7);buffer.curveVertex(e+s,r+u);for(var g=0;g<360;g+=o){var w=map(g,0,360,0,2*Math.PI),l=e+5*Math.cos(w),b=r+5*Math.sin(w),y=noiseMap.get(l,b);y<f&&(f=y,n=l,a=b)}if(e==n&r==a){n&&a&&(buffer.fill(...t),buffer.rect(n,a,4));break}e=n,r=a}buffer.endShape()}function draw(){if(nCurr>=nIters)isCaptured||(fxpreview(),isCaptured=!0);else{var e=steps[nCurr];for(let i=0;i<80&&(nCurr%2==0?drawIsoline(xi,yi):drawIsoline(yi,xi),(xi+=fxRandRanged(...e))>bufferSize&&(xi=fxRandRanged(-10,0),yi+=fxRandRanged(...e)),!(yi>=bufferSize+100&&(yi=fxRandRanged(-10,0),++nCurr>=nIters)));i++);if(image(buffer,0,0),nCurr<nIters){var i=Math.max(1,yi)/(bufferSize+100)*1/nIters+nCurr/nIters;i=Math.round(100*i),loadingBuffer.background(0),loadingBuffer.text(`Loading ${i}%`,5,23),image(loadingBuffer,0,0)}}}function keyTyped(){"s"===key&&saveCanvas(myCanvas,"flowers","png")}