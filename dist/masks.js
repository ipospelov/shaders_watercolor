class OneFlowerMap{constructor(){this.initBuffer(),this.drawComposition(),this.buffer.loadPixels(),this.d=this.buffer.pixelDensity()}drawComposition(){drawOneFlowerComposition(this.buffer)}initBuffer(){this.buffer=createGraphics(bufferSize,bufferSize),this.buffer.width=windowEdgeSize,this.buffer.height=windowEdgeSize,this.buffer.background(255)}getPixelColor(e,r){if(e=Math.round(e),r=Math.round(r),e>bufferSize||e<=0||r>bufferSize||r<=0)return 1;var i=4*(r*this.d*bufferSize*this.d+e*this.d);return this.buffer.pixels[i]}get(e,r){var i=this.getPixelColor(e,r);if(255==i)return 1;var o=Math.sqrt((e-bufferSize/2)**2+(r-bufferSize/2)**2)/500;return map(i,0,255,0,1)*o}}class ThreeFlowerMap extends OneFlowerMap{drawComposition(){drawThreeFlowerComposition(this.buffer)}get(e,r){var i=this.getPixelColor(e,r);if(255==i)return 1;var o=Math.sqrt((e-bufferSize/2)**2+(r-bufferSize/2)**2)/1e3;return map(i,0,255,0,1)*o}}class GridFlowerMap extends OneFlowerMap{drawComposition(){this.positions=drawGridFlowerComposition(this.buffer)}get(e,r){var i=this.getPixelColor(e,r);if(255==i)return 1;var o=Math.sqrt((e-bufferSize/2)**2+(r-bufferSize/2)**2)/500;return map(i,0,255,0,1)*o}}class OneFlowerMapFramed extends OneFlowerMap{drawComposition(){drawFrameComposition(this.buffer),drawOneFlowerComposition(this.buffer)}}class ThreeFlowerMapFramed extends ThreeFlowerMap{drawComposition(){drawFrameComposition(this.buffer,-100),drawThreeFlowerComposition(this.buffer)}}class CircleFlowerMap extends OneFlowerMap{drawComposition(){drawCircleComposition(this.buffer)}}var compositions=[OneFlowerMap,CircleFlowerMap,GridFlowerMap,OneFlowerMapFramed,ThreeFlowerMapFramed];function Noise(e=5e-5){this.step=e,this.flowerMap=new compositions[compositionIndex],this.get=function(e,r){return this.flowerMap.get(e,r)*noise(e*this.step,r*this.step)}}